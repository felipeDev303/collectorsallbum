# ğŸ“š Collectors Album API

Sistema de gestiÃ³n de Ã¡lbumes de colecciÃ³n desarrollado con Spring Boot. Permite administrar Ã¡lbumes, lÃ¡minas, realizar carga masiva de lÃ¡minas y generar reportes de faltantes y repetidas.

## ğŸ“‹ Tabla de Contenidos

- [DescripciÃ³n del Proyecto](#descripciÃ³n-del-proyecto)
- [TecnologÃ­as Utilizadas](#tecnologÃ­as-utilizadas)
- [Seguimiento del Proyecto](#seguimiento-del-proyecto)
- [ConfiguraciÃ³n del Entorno](#configuraciÃ³n-del-entorno)
- [MetodologÃ­a de Trabajo](#metodologÃ­a-de-trabajo)
- [PlanificaciÃ³n de Sprints](#planificaciÃ³n-de-sprints)
- [Endpoints de la API](#endpoints-de-la-api)
- [Testing](#testing)
- [Contribuir](#contribuir)

---

## ğŸ¯ DescripciÃ³n del Proyecto

**Collectors Album API** es una aplicaciÃ³n backend RESTful que permite:

- âœ… Crear y gestionar Ã¡lbumes de colecciÃ³n
- âœ… Generar automÃ¡ticamente espacios para lÃ¡minas al crear un Ã¡lbum
- âœ… Realizar carga masiva de lÃ¡minas (batch processing)
- âœ… Consultar lÃ¡minas faltantes y repetidas
- âœ… Subir imÃ¡genes asociadas a las lÃ¡minas
- âœ… DocumentaciÃ³n interactiva con Swagger/OpenAPI

**Nota:** Este proyecto no incluye frontend ni sistema de autenticaciÃ³n, enfocÃ¡ndose 100% en la robustez de la API.

---

## ğŸ› ï¸ TecnologÃ­as Utilizadas

| TecnologÃ­a      | VersiÃ³n | PropÃ³sito                       |
| --------------- | ------- | ------------------------------- |
| Java            | 21      | Lenguaje de programaciÃ³n        |
| Spring Boot     | 3.5.8   | Framework principal             |
| Spring Data JPA | -       | Persistencia de datos           |
| PostgreSQL      | 8.x     | Base de datos                   |
| Lombok          | -       | ReducciÃ³n de cÃ³digo boilerplate |
| Validation      | -       | ValidaciÃ³n de datos             |
| Swagger/OpenAPI | -       | DocumentaciÃ³n de API            |
| JUnit/Mockito   | -       | Testing                         |
| Maven           | -       | GestiÃ³n de dependencias         |

---

## ğŸ“Š Seguimiento del Proyecto

### Estado General del Proyecto

**Inicio:** 18 de diciembre de 2025  
**DuraciÃ³n:** 9 dÃ­as (3 Sprints de 3 dÃ­as)  
**Progreso Global:** 11% (3/27 tareas completadas)  
**Ãšltima actualizaciÃ³n:** 18 de diciembre de 2025

### Progress Dashboard

```
Sprint 1: [â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘] 3/9 tareas   - Cimientos y GestiÃ³n de Ãlbumes (EN PROGRESO)
Sprint 2: [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0/9 tareas   - LÃ³gica de Negocio (LÃ¡minas)
Sprint 3: [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0/9 tareas   - Multimedia, Testing y DocumentaciÃ³n
```

### ğŸ† Hitos Completados

- [ ] **Hito 1:** API funcional con CRUD de Ãlbumes
- [ ] **Hito 2:** Sistema de lÃ¡minas con carga masiva funcionando
- [ ] **Hito 3:** Proyecto completo con documentaciÃ³n y tests

---

## âš™ï¸ ConfiguraciÃ³n del Entorno

### Prerrequisitos

- Java JDK 21
- PostgreSQL 
- Maven 3.6+
- Git
- Postman (para pruebas)

### InstalaciÃ³n

1. **Clonar el repositorio**

```bash
git clone https://github.com/felipeDev303/collectorsallbum.git
cd collectorsallbum
```

2. **Configurar la base de datos**

```sql
CREATE DATABASE coleccion_db;
CREATE USER coleccion_user WITH PASSWORD 'tu_password';
GRANT ALL PRIVILEGES ON DATABASE coleccion_db TO coleccion_user;
```

3. **Configurar application.properties**

```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/coleccion_db
spring.datasource.username=coleccion_user
spring.datasource.password=tu_password
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
```

4. **Ejecutar la aplicaciÃ³n**

```bash
mvn clean install
mvn spring-boot:run
```

5. **Acceder a Swagger UI**

```
http://localhost:8080/swagger-ui.html
```

---

## ğŸ”„ MetodologÃ­a de Trabajo

### Git Flow Simplificado

```
main (CÃ³digo estable y funcional)
  â†‘
  â””â”€â”€ feature/setup-infra
  â””â”€â”€ feature/album-crud
  â””â”€â”€ feature/lamina-logic
  â””â”€â”€ feature/images-docs
```

### Reglas de Trabajo

1. **Rama main:** Solo cÃ³digo estable y testeado
2. **Ramas feature/\*:** Una rama por funcionalidad o Sprint
3. **Pull Requests:** RevisiÃ³n obligatoria antes de merge
4. **Commits:** PequeÃ±os y descriptivos
5. **Testing:** Todas las funcionalidades deben estar testeadas

### Ejemplo de Flujo de Trabajo

```bash
# Crear nueva rama para funcionalidad
git checkout -b feature/album-crud

# Realizar cambios y commits
git add .
git commit -m "feat: add Album entity and repository"

# Subir cambios
git push origin feature/album-crud

# Crear Pull Request en GitHub
# DespuÃ©s de revisiÃ³n: Merge a main
```

---

## ğŸ“… PlanificaciÃ³n de Sprints

### ğŸš€ SPRINT 1: Cimientos y GestiÃ³n de Ãlbumes

**Objetivo:** Proyecto configurado, conectado a BD y gestiÃ³n de Ãlbum funcionando

#### ğŸ“† DÃ­a 1: ConfiguraciÃ³n e Infraestructura

**Rama:** `feature/setup-infra`

**Tareas:**

- [x] Inicializar proyecto en Spring Initializr
- [x] Crear repositorio en GitHub
- [x] Configurar `application.properties`
- [ ] Crear base de datos `coleccion_db` en PostgreSQL
- [ ] Configurar Swagger/OpenAPI
- [ ] Verificar que corre en localhost:8080

**Entregable:** âœ… Proyecto corriendo y Swagger UI visible

**Checklist de ValidaciÃ³n:**

- [x] El proyecto compila sin errores
- [ ] Swagger UI accesible en `/swagger-ui.html`
- [ ] ConexiÃ³n a PostgreSQL exitosa

---

#### ğŸ“† DÃ­a 2: Dominio Ãlbum (CRUD BÃ¡sico)

**Rama:** `feature/album-crud`

**Tareas:**

- [ ] Crear entidad `Album` (id, nombre, fecha, totalLaminas)
- [ ] Crear `AlbumRepository` extendiendo JpaRepository
- [ ] Crear `AlbumService` con mÃ©todos CRUD
  - [ ] Crear Ã¡lbum
  - [ ] Listar todos los Ã¡lbumes
  - [ ] Buscar por ID
  - [ ] Eliminar Ã¡lbum
- [ ] Crear `AlbumController` con endpoints REST
- [ ] Agregar anotaciones de Lombok (@Data, @Entity, etc.)

**Entregable:** âœ… API CRUD de Ãlbumes funcional

**Endpoints Implementados:**

- [ ] POST `/api/albums` - Crear Ã¡lbum
- [ ] GET `/api/albums` - Listar Ã¡lbumes
- [ ] GET `/api/albums/{id}` - Obtener por ID
- [ ] DELETE `/api/albums/{id}` - Eliminar Ã¡lbum

---

#### ğŸ“† DÃ­a 3: Pruebas de Sprint 1 y Merge

**PR:** `#1 - Setup e Infraestructura + CRUD Ãlbumes`

**Tareas:**

- [ ] Agregar validaciones (@NotNull, @NotBlank en Album)
- [ ] Validar que nombre del Ã¡lbum no sea vacÃ­o
- [ ] Validar que totalLaminas sea mayor a 0
- [ ] Pruebas manuales en Postman de todos los endpoints
- [ ] Crear Postman Collection v1.0
- [ ] Documentar request/response examples
- [ ] Crear Pull Request y revisar cÃ³digo
- [ ] Merge a `main`

**Entregable:** ğŸ¯ **HITO 1 COMPLETADO** - API funcional con CRUD de Ãlbumes

**Criterios de AceptaciÃ³n:**

- [ ] Todos los endpoints responden correctamente
- [ ] Validaciones funcionando
- [ ] PR aprobado y mergeado

---

### ğŸ”§ SPRINT 2: LÃ³gica de Negocio (LÃ¡minas)

**Objetivo:** Manejar creaciÃ³n automÃ¡tica de espacios y control de repetidas

#### ğŸ“† DÃ­a 4: Entidad LÃ¡mina y GeneraciÃ³n AutomÃ¡tica

**Rama:** `feature/lamina-logic`

**Tareas:**

- [ ] Crear entidad `Lamina` con relaciÃ³n @ManyToOne a Album
  - [ ] Campos: id, numero, cantidad, urlImagen, album
- [ ] Modificar `AlbumService` para generar lÃ¡minas automÃ¡ticamente
  - [ ] Al crear Ã¡lbum, crear N registros de Lamina (1 a totalLaminas)
  - [ ] Inicializar cantidad = 0 en todas
- [ ] Crear `LaminaRepository`
- [ ] Crear endpoint GET `/api/albums/{id}/laminas`

**Entregable:** âœ… LÃ³gica de slots vacÃ­os automÃ¡tica

**Validaciones Clave:**

- [ ] Al crear Ã¡lbum con 50 lÃ¡minas, se crean 50 registros
- [ ] Todas las lÃ¡minas inician con cantidad = 0
- [ ] RelaciÃ³n bidireccional Album-Lamina funciona

---

#### ğŸ“† DÃ­a 5: Carga Masiva (Batch Processing)

**Rama:** `feature/lamina-logic` (continÃºa)

**Tareas:**

- [ ] Crear DTO `BatchLaminasDTO` (lista de Integers)
- [ ] Crear `LaminaService` con lÃ³gica de carga masiva
  - [ ] Recibir lista de nÃºmeros [5, 10, 10, 20]
  - [ ] Por cada nÃºmero, hacer cantidad++
  - [ ] Manejar duplicados en la lista
- [ ] Crear endpoint POST `/api/albums/{id}/laminas/batch`
- [ ] Validar que los nÃºmeros estÃ©n dentro del rango del Ã¡lbum
- [ ] Retornar resumen: agregadas, actualizadas, errores

**Entregable:** âœ… Endpoint de carga masiva funcional

**Casos de Prueba:**

- [ ] Cargar [1, 2, 3] suma correctamente
- [ ] Cargar [1, 1, 1] suma 3 a la lÃ¡mina 1
- [ ] Cargar [999] con Ã¡lbum de 500 retorna error
- [ ] Cargar lista vacÃ­a retorna mensaje apropiado

---

#### ğŸ“† DÃ­a 6: Reportes y Consultas JPA

**PR:** `#2 - LÃ³gica de LÃ¡minas y Batch Processing`

**Tareas:**

- [ ] Crear queries en `LaminaRepository`
  - [ ] `findByAlbumIdAndCantidad(Long albumId, int cantidad)`
  - [ ] `findByAlbumIdAndCantidadGreaterThan(Long albumId, int cantidad)`
- [ ] Endpoint GET `/api/albums/{id}/laminas/faltantes`
- [ ] Endpoint GET `/api/albums/{id}/laminas/repetidas`
- [ ] Agregar estadÃ­sticas: total faltantes, total repetidas
- [ ] Pruebas en Postman de escenario completo
- [ ] Crear Pull Request
- [ ] Merge a `main`

**Entregable:** ğŸ¯ **HITO 2 COMPLETADO** - Sistema Ãºtil con reportes

**Flujo de Prueba Completo:**

1. [ ] Crear Ã¡lbum de 100 lÃ¡minas
2. [ ] Cargar batch [1, 5, 5, 10, 20]
3. [ ] Verificar faltantes (deberÃ­a mostrar 96)
4. [ ] Verificar repetidas (deberÃ­a mostrar solo la 5)

---

### ğŸ¨ SPRINT 3: Multimedia, Testing y DocumentaciÃ³n

**Objetivo:** Refinamiento, manejo de imÃ¡genes y entrega final

#### ğŸ“† DÃ­a 7: GestiÃ³n de ImÃ¡genes (Upload)

**Rama:** `feature/images-docs`

**Tareas:**

- [ ] Crear carpeta `uploads/` en el proyecto
- [ ] Crear `FileStorageService`
  - [ ] MÃ©todo para guardar archivo
  - [ ] Validar tipo de archivo (jpg, png)
  - [ ] Generar nombre Ãºnico
- [ ] Endpoint POST `/api/laminas/{id}/imagen`
- [ ] Endpoint GET `/uploads/{filename}` (servir imagen)
- [ ] Actualizar entidad Lamina con campo urlImagen
- [ ] Configurar resource handler en Spring

**Entregable:** âœ… Sistema de almacenamiento de imÃ¡genes

**Validaciones:**

- [ ] Solo acepta imÃ¡genes (jpg, png, gif)
- [ ] TamaÃ±o mÃ¡ximo 5MB
- [ ] Las imÃ¡genes se pueden visualizar en navegador

---

#### ğŸ“† DÃ­a 8: Pruebas Unitarias y Escenarios

**Rama:** `feature/images-docs` (continÃºa)

**Tareas:**

- [ ] Test unitarios con JUnit/Mockito
  - [ ] `AlbumServiceTest`: Probar creaciÃ³n de Ã¡lbum
  - [ ] `LaminaServiceTest`: Probar carga masiva
  - [ ] Probar casos edge (nÃºmeros fuera de rango)
- [ ] Test de integraciÃ³n
  - [ ] `AlbumControllerTest`
  - [ ] `LaminaControllerTest`
- [ ] Ejecutar baterÃ­a completa en Postman
- [ ] Capturar screenshots de Swagger
- [ ] Capturar screenshots de Postman
- [ ] Documentar request/response en PDF

**Entregable:** âœ… Tests en verde y evidencias

**Coverage Esperado:**

- [ ] Servicios: 80%+ cobertura
- [ ] Controllers: 70%+ cobertura
- [ ] Casos edge cubiertos

---

#### ğŸ“† DÃ­a 9: DocumentaciÃ³n y Cierre

**PR:** `#3 - ImÃ¡genes, Tests y DocumentaciÃ³n Final`

**Tareas:**

- [ ] Revisar y mejorar descripciones en Swagger
  - [ ] Agregar @Operation en cada endpoint
  - [ ] Documentar parÃ¡metros y responses
- [ ] Actualizar este README.md con:
  - [ ] Instrucciones de instalaciÃ³n
  - [ ] Ejemplos de uso
  - [ ] Lista completa de endpoints
- [ ] Crear documento PDF de entrega
  - [ ] Arquitectura del proyecto
  - [ ] Screenshots de Postman
  - [ ] Diagramas de BD
- [ ] Crear Pull Request final
- [ ] Merge a `main`
- [ ] Crear tag v1.0.0

**Entregable:** ğŸ¯ **HITO 3 COMPLETADO** - Proyecto terminado

**Checklist Final:**

- [ ] Todos los PRs mergeados
- [ ] Tests pasando (100%)
- [ ] DocumentaciÃ³n completa
- [ ] Postman Collection exportada
- [ ] PDF de entrega generado
- [ ] Repositorio limpio y ordenado

---

## ğŸŒ Endpoints de la API

### Ãlbumes

| MÃ©todo | Endpoint           | DescripciÃ³n              | Estado |
| ------ | ------------------ | ------------------------ | ------ |
| POST   | `/api/albums`      | Crear nuevo Ã¡lbum        | â³     |
| GET    | `/api/albums`      | Listar todos los Ã¡lbumes | â³     |
| GET    | `/api/albums/{id}` | Obtener Ã¡lbum por ID     | â³     |
| DELETE | `/api/albums/{id}` | Eliminar Ã¡lbum           | â³     |

### LÃ¡minas

| MÃ©todo | Endpoint                             | DescripciÃ³n                | Estado |
| ------ | ------------------------------------ | -------------------------- | ------ |
| GET    | `/api/albums/{id}/laminas`           | Listar lÃ¡minas de un Ã¡lbum | â³     |
| POST   | `/api/albums/{id}/laminas/batch`     | Carga masiva de lÃ¡minas    | â³     |
| GET    | `/api/albums/{id}/laminas/faltantes` | Listar lÃ¡minas faltantes   | â³     |
| GET    | `/api/albums/{id}/laminas/repetidas` | Listar lÃ¡minas repetidas   | â³     |
| POST   | `/api/laminas/{id}/imagen`           | Subir imagen de lÃ¡mina     | â³     |
| GET    | `/uploads/{filename}`                | Obtener imagen             | â³     |

**Leyenda:** âœ… Completado | ğŸš§ En progreso | â³ Pendiente

---

## ğŸ§ª Testing

### Ejecutar Tests

```bash
# Todos los tests
mvn test

# Tests especÃ­ficos
mvn test -Dtest=AlbumServiceTest

# Con coverage
mvn clean test jacoco:report
```

### Estrategia de Testing

1. **Tests Unitarios:** Servicios y lÃ³gica de negocio
2. **Tests de IntegraciÃ³n:** Controllers y repositorios
3. **Tests Manuales:** Postman Collection

---

## ğŸ’¡ Consejos y Buenas PrÃ¡cticas

### âœ… Do's

- âœ… Usa Lombok para reducir cÃ³digo boilerplate
- âœ… Usa DTOs, no expongas entidades directamente
- âœ… Commits pequeÃ±os y descriptivos
- âœ… Documenta endpoints en Swagger
- âœ… Prueba cada funcionalidad antes del PR

### âŒ Don'ts

- âŒ No hagas commits enormes
- âŒ No expongas entidades JPA en controllers
- âŒ No te atasques en un problema mÃ¡s de 30 minutos
- âŒ No hagas merge a main sin PR
- âŒ No dejes cÃ³digo comentado en producciÃ³n

---

## ğŸ“ Contribuir

1. Fork el proyecto
2. Crea una rama (`git checkout -b feature/nueva-funcionalidad`)
3. Commit tus cambios (`git commit -m 'feat: agregar nueva funcionalidad'`)
4. Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. Abre un Pull Request

---

## ğŸ“ Registro de Cambios

### [Unreleased]

- Proyecto en desarrollo

### Sprint 1 (DÃ­as 1-3)

- [ ] ConfiguraciÃ³n inicial del proyecto
- [ ] ImplementaciÃ³n CRUD de Ãlbumes

### Sprint 2 (DÃ­as 4-6)

- [ ] LÃ³gica de lÃ¡minas y generaciÃ³n automÃ¡tica
- [ ] Sistema de carga masiva (batch)
- [ ] Reportes de faltantes y repetidas

### Sprint 3 (DÃ­as 7-9)

- [ ] GestiÃ³n de imÃ¡genes
- [ ] Tests unitarios y de integraciÃ³n
- [ ] DocumentaciÃ³n final

---

## ğŸ“„ Licencia

Este proyecto es parte de un ejercicio acadÃ©mico/profesional.

---

## ğŸ‘¨â€ğŸ’» Autor

**Felipe Dev**

- GitHub: [@felipeDev303](https://github.com/felipeDev303)
- Proyecto: [collectorsallbum](https://github.com/felipeDev303/collectorsallbum)

---

## ğŸ¯ Resumen de Entregables

| DÃ­a | Foco     | Entregable Clave               | Estado |
| --- | -------- | ------------------------------ | ------ |
| 1   | Setup    | Repo Git + Swagger funcionando | â³     |
| 2   | Ãlbum    | API CRUD de Ãlbumes lista      | â³     |
| 3   | Calidad  | PR #1 + Postman Collection v1  | â³     |
| 4   | LÃ¡minas  | LÃ³gica de slots vacÃ­os         | â³     |
| 5   | LÃ³gica   | Endpoint de carga masiva       | â³     |
| 6   | Reportes | PR #2 + Faltantes/Repetidas    | â³     |
| 7   | ImÃ¡genes | Sistema de almacenamiento      | â³     |
| 8   | Testing  | Tests + Screenshots            | â³     |
| 9   | Cierre   | PR #3 + DocumentaciÃ³n final    | â³     |

---

**ğŸš€ Â¡Manos a la obra! Actualiza este README conforme avances en el proyecto.**

# üìö Collectors Album API

Sistema de gesti√≥n de √°lbumes de colecci√≥n desarrollado con Spring Boot. Esta API permite administrar √°lbumes, l√°minas, realizar carga masiva y generar reportes de faltantes y repetidas para coleccionistas.

## üìã Tabla de Contenidos

- [Descripci√≥n del Proyecto](#-descripci√≥n-del-proyecto)
- [Tecnolog√≠as Utilizadas](#-tecnolog√≠as-utilizadas)
- [Seguimiento del Proyecto](#-seguimiento-del-proyecto)
- [Endpoints de la API](#-endpoints-de-la-api)
- [Configuraci√≥n del Entorno](#-configuraci√≥n-del-entorno)

---

## üéØ Descripci√≥n del Proyecto

**Collectors Album API** es una soluci√≥n backend dise√±ada para resolver la gesti√≥n de colecciones de l√°minas.

- ‚úÖ **Automatizaci√≥n:** Genera espacios vac√≠os autom√°ticamente al crear un √°lbum.
- ‚úÖ **Integridad:** Validaciones de datos con Bean Validation (IL2).
- ‚úÖ **Eficiencia:** Consultas optimizadas a nivel de base de datos (IL4).
- ‚úÖ **Auditor√≠a:** Registro de fechas de creaci√≥n de registros.

---

## üõ†Ô∏è Tecnolog√≠as Utilizadas

| Tecnolog√≠a        | Prop√≥sito                                    |
| ----------------- | -------------------------------------------- |
| **Java 21**       | Lenguaje de programaci√≥n                     |
| **Spring Boot**   | Framework principal (3.x)                    |
| **PostgreSQL**    | Base de datos actual (En transici√≥n a MySQL) |
| **Lombok**        | Reducci√≥n de c√≥digo boilerplate              |
| **JPA/Hibernate** | Mapeo objeto-relacional y persistencia       |
| **Maven**         | Gesti√≥n de dependencias y construcci√≥n       |

---

## üìä Seguimiento del Proyecto

**√öltima Actualizaci√≥n:** 19 de diciembre de 2025  
**Estado General:** üü¢ Completamente Funcional con todas las funcionalidades core implementadas

### Estado de Sprints

- **Sprint 1 (Cimientos):** [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100% ‚úÖ - Proyecto configurado, BD conectada, CRUD completo
- **Sprint 2 (L√≥gica):** [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100% ‚úÖ - Generaci√≥n autom√°tica, queries optimizadas, reportes
- **Sprint 3 (Entrega):** [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë] 80% ‚ö†Ô∏è - Validaciones completas, manejo de errores, falta testing

### üìà Progreso por Componente

| Componente                   | Estado       | Completado |
| ---------------------------- | ------------ | ---------- |
| **Arquitectura MVC**         | ‚úÖ Completo  | 100%       |
| **Modelos con Validaciones** | ‚úÖ Completo  | 100%       |
| **Repositorios JPA**         | ‚úÖ Completo  | 100%       |
| **Servicios Optimizados**    | ‚úÖ Completo  | 100%       |
| **Controladores REST**       | ‚úÖ Completo  | 100%       |
| **Manejo de Errores**        | ‚úÖ Completo  | 100%       |
| **Testing**                  | ‚ùå Pendiente | 0%         |

### ‚úÖ Funcionalidades Implementadas

- [x] **Arquitectura MVC** completa (Controller-Service-Repository-Model)
- [x] **Validaciones completas**:
  - Album: `@NotBlank` en nombre, `@NotNull` en fecha, `@Min(1)` en totalLaminas
  - Lamina: `@NotBlank` en nombre, `@NotNull` y `@Min` en numero y cantidad
- [x] **Relaciones JPA**: Album ‚Üî Lamina con cascada
- [x] **Consultas Optimizadas**: Queries a nivel de repositorio (no filtros en memoria)
- [x] **Generaci√≥n Autom√°tica**: Al crear √°lbum se generan sus l√°minas con cantidad=0
- [x] **CRUD Completo**: POST, GET (all/by ID), DELETE para √°lbumes
- [x] **Carga Masiva** de l√°minas (batch processing)
- [x] **Reportes**: Endpoints para l√°minas faltantes y repetidas
- [x] **Manejo de Errores Global**: `@ControllerAdvice` con respuestas JSON consistentes
- [x] **Excepciones Personalizadas**: `ResourceNotFoundException` para 404
- [x] **Lombok**: Reducci√≥n de boilerplate con `@Data`

### üéØ Mejoras Pendientes

1. **ALTA** - Testing

   - Implementar tests unitarios para servicios
   - Implementar tests de integraci√≥n para controladores
   - Cobertura m√≠nima recomendada: 70%

2. **MEDIA** - Documentaci√≥n

   - Agregar ejemplos de request/response en Swagger
   - Documentar c√≥digos de error en README
   - Crear colecci√≥n Postman

3. **MEDIA** - Seguridad

   - Externalizar credenciales a variables de entorno
   - Considerar agregar Spring Security (opcional)

4. **BAJA** - Optimizaciones
   - Resolver warnings de null safety (an√°lisis est√°tico)
   - Actualizar Spring Boot 3.5.8 ‚Üí 3.5.9
   - Agregar √≠ndices en columnas frecuentemente consultadas

### üèÜ Logros Recientes

- ‚úÖ Campo `totalLaminas` agregado en Album
- ‚úÖ Validaciones completas en ambos modelos
- ‚úÖ `@ControllerAdvice` con manejo global de errores
- ‚úÖ CRUD completo con GET by ID y DELETE
- ‚úÖ M√©todos de servicio optimizados con queries directas
- ‚úÖ Verificaci√≥n de existencia antes de operaciones cr√≠ticas

---

## üåê Endpoints de la API

### Gesti√≥n de √Ålbumes

| M√©todo   | Endpoint            | Descripci√≥n                              | C√≥digos |
| -------- | ------------------- | ---------------------------------------- | ------- |
| `POST`   | `/api/albumes`      | Crea un √°lbum y genera sus l√°minas       | 200/400 |
| `GET`    | `/api/albumes`      | Lista todos los √°lbumes                  | 200     |
| `GET`    | `/api/albumes/{id}` | Obtiene un √°lbum espec√≠fico              | 200/404 |
| `DELETE` | `/api/albumes/{id}` | Elimina un √°lbum y sus l√°minas (cascada) | 204/404 |

### Gesti√≥n de L√°minas

| M√©todo | Endpoint                            | Descripci√≥n              | C√≥digos |
| ------ | ----------------------------------- | ------------------------ | ------- |
| `POST` | `/api/albumes/laminas/carga-masiva` | Carga masiva de l√°minas  | 200/400 |
| `GET`  | `/api/albumes/{id}/faltantes`       | L√°minas con cantidad = 0 | 200/404 |
| `GET`  | `/api/albumes/{id}/repetidas`       | L√°minas con cantidad > 1 | 200/404 |

### C√≥digos de Respuesta

- **200 OK**: Operaci√≥n exitosa
- **204 No Content**: Eliminaci√≥n exitosa
- **400 Bad Request**: Error de validaci√≥n
- **404 Not Found**: Recurso no encontrado
- **500 Internal Server Error**: Error del servidor

---

## ‚öôÔ∏è Configuraci√≥n del Entorno

### 1. Requisitos

- JDK 21
- PostgreSQL (Base de datos: `collectorsallbumdb`)
- Maven

### 2. Base de Datos

```sql
CREATE DATABASE collectorsallbumdb;
```

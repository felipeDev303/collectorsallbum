# üìö Collectors Album API

Sistema de gesti√≥n de √°lbumes de colecci√≥n desarrollado con Spring Boot. Esta API permite administrar √°lbumes, l√°minas, realizar carga masiva y generar reportes de faltantes y repetidas para coleccionistas.

## üìã Tabla de Contenidos

- [Descripci√≥n del Proyecto](#-descripci√≥n-del-proyecto)
- [Tecnolog√≠as Utilizadas](#-tecnolog√≠as-utilizadas)
- [Seguimiento del Proyecto](#-seguimiento-del-proyecto)
- [Endpoints de la API](#-endpoints-de-la-api)
- [Configuraci√≥n del Entorno](#-configuraci√≥n-del-entorno)

---

## üéØ Descripci√≥n del Proyecto

**Collectors Album API** es una soluci√≥n backend dise√±ada para resolver la gesti√≥n de colecciones de l√°minas.

- ‚úÖ **Automatizaci√≥n:** Genera espacios vac√≠os autom√°ticamente al crear un √°lbum.
- ‚úÖ **Integridad:** Validaciones de datos con Bean Validation (IL2).
- ‚úÖ **Eficiencia:** Consultas optimizadas a nivel de base de datos (IL4).
- ‚úÖ **Auditor√≠a:** Registro de fechas de creaci√≥n de registros.

---

## üõ†Ô∏è Tecnolog√≠as Utilizadas

| Tecnolog√≠a        | Prop√≥sito                                    |
| ----------------- | -------------------------------------------- |
| **Java 21**       | Lenguaje de programaci√≥n                     |
| **Spring Boot**   | Framework principal (3.x)                    |
| **PostgreSQL**    | Base de datos actual (En transici√≥n a MySQL) |
| **Lombok**        | Reducci√≥n de c√≥digo boilerplate              |
| **JPA/Hibernate** | Mapeo objeto-relacional y persistencia       |
| **Maven**         | Gesti√≥n de dependencias y construcci√≥n       |

---

## üìä Seguimiento del Proyecto

**√öltima Actualizaci√≥n:** 19 de diciembre de 2025  
**Estado General:** üü¢ Funcional con optimizaciones aplicadas

### Estado de Sprints

- **Sprint 1 (Cimientos):** [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100% ‚úÖ - Proyecto configurado, BD conectada, CRUD de √°lbumes funcionando
- **Sprint 2 (L√≥gica):** [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë] 85% ‚ö†Ô∏è - Generaci√≥n autom√°tica implementada, falta campo `totalLaminas` en Album
- **Sprint 3 (Entrega):** [‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] 20% üöß - Validaciones parciales, sin manejo de errores global ni testing

### üìà Progreso por Componente

| Componente                   | Estado         | Completado |
| ---------------------------- | -------------- | ---------- |
| **Arquitectura MVC**         | ‚úÖ Completo    | 100%       |
| **Modelos con Validaciones** | ‚ö†Ô∏è Parcial     | 70%        |
| **Repositorios JPA**         | ‚úÖ Completo    | 100%       |
| **Servicios Optimizados**    | ‚ö†Ô∏è Con errores | 75%        |
| **Controladores REST**       | ‚úÖ Funcional   | 90%        |
| **Manejo de Errores**        | ‚ùå Falta       | 0%         |
| **Testing**                  | ‚ùå Falta       | 0%         |

### ‚úÖ Funcionalidades Implementadas

- [x] **Arquitectura MVC** completa (Controller-Service-Repository-Model)
- [x] **Validaciones en Album**: `@NotBlank` en nombre, `@NotNull` en fecha
- [x] **Relaciones JPA**: Album ‚Üî Lamina con cascada
- [x] **Consultas Optimizadas**: M√©todos `findByAlbumIdAndCantidad()` y `findByAlbumIdAndCantidadGreaterThan()`
- [x] **Carga Masiva** de l√°minas (batch processing)
- [x] **Reportes**: Endpoints para l√°minas faltantes (cantidad=0) y repetidas (cantidad>1)
- [x] **Lombok**: Reducci√≥n de boilerplate con `@Data`
- [x] **Auditor√≠a**: `@CreatedDate` en entidades (preparado)

### ‚ö†Ô∏è Problemas Actuales

1. **CR√çTICO** - Falta campo `totalLaminas` en modelo Album
   - Error: `The method getTotalLaminas() is undefined for the type Album`
   - Impacto: Generaci√≥n autom√°tica de l√°minas no funciona
2. **ALTA** - Sin validaciones en modelo Lamina
   - Falta: `@NotBlank`, `@Min`, `@NotNull`
3. **ALTA** - Sin manejo global de excepciones
   - Falta: `@ControllerAdvice` para respuestas de error consistentes
4. **MEDIA** - Endpoints CRUD incompletos

   - Falta: `GET /api/albumes/{id}` y `DELETE /api/albumes/{id}`

5. **BAJA** - Warning de null safety en AlbumService l√≠nea 74

### üéØ Pr√≥ximos Pasos

1. Agregar campo `totalLaminas` en Album.java
2. Agregar validaciones en Lamina.java
3. Implementar @ControllerAdvice para manejo de errores
4. Completar endpoints GET by ID y DELETE
5. Crear tests unitarios b√°sicos

---

## üåê Endpoints de la API

### Gesti√≥n de √Ålbumes

- `POST /api/albumes` : Crea un √°lbum y genera sus l√°minas autom√°ticamente.
- `GET /api/albumes` : Lista todos los √°lbumes registrados.

### Gesti√≥n de L√°minas

- `POST /api/albumes/laminas/carga-masiva` : Carga un listado de l√°minas mediante JSON.
- `GET /api/albumes/{id}/faltantes` : Devuelve l√°minas con cantidad = 0.
- `GET /api/albumes/{id}/repetidas` : Devuelve l√°minas con cantidad > 1.

---

## ‚öôÔ∏è Configuraci√≥n del Entorno

### 1. Requisitos

- JDK 21
- PostgreSQL (Base de datos: `collectorsallbumdb`)
- Maven

### 2. Base de Datos

```sql
CREATE DATABASE collectorsallbumdb;
```
